## 1. 機能要件 (Functional Requirements)

| No. | 要件カテゴリ | 具体的な機能 | 詳細 |
| :---: | :--- | :--- | :--- |
| F1 | データの取得 | 土壌データの収集 | 土壌センサーから土壌水分量、温度などをRaspberry Piを介して定期的に取得すること。 |
| F2 | データ送信 | センサーデータの送信 | ラズパイが収集したデータを、設定された間隔でCloudflareのインフラストラクチャに送信すること。|
| F3 | データ保存 | データの永続化 | 送信されたセンサーデータをCloudflare上のストレージ（例: Cloudflare D1）に保存し、履歴として保持すること。|
| F4 | Slack連携 (コマンド) | スラッシュコマンドによる情報取得 | Slack内で特定のスラッシュコマンドを実行することで、最新の土壌状態を即座に取得し、Slackチャンネルに表示すること。|
| F5 | Slack連携 (ボット) | 自動通知・アラート機能 | 土壌状態が特定のしきい値を超えた場合、Slackボットが自動で指定のチャンネルにアラートメッセージを送信すること。|
| F6 | データ可視化 | BIツール連携 | 保存されたデータをBIツール（Tableau, Power BIなど）がアクセスできる形式で提供し、可視化できるようにすること。|

---

## 2. 非機能要件 (Non-Functional Requirements)

### 2.1. コスト・インフラストラクチャ要件 💰
* **NF1.1 (費用対効果):** インフラストラクチャの運用費用はできる限り低く抑えること。
* **NF1.2 (技術選定):** インフラストラクチャの基盤としてCloudflare（Workers, D1など）を積極的に採用し、低コストサービスを最大限に活用すること。

### 2.2. 性能要件 🚀
* **NF2.1 (応答時間):** Slackスラッシュコマンドの実行から応答までの時間は、迅速であること（例: 5秒以内）。
* **NF2.2 (データ遅延):** センサー取得からストレージ反映までの遅延は許容範囲内であること（例: 最大1分以内）。

### 2.3. セキュリティ要件 🔒
* **NF3.1 (認証・認可):** ラズパイからCloudflareへのデータ送信、およびSlackからのAPI呼び出しにおいて、適切な認証メカニズム（APIキー、トークンなど）を使用すること。

### 2.4. 運用・保守要件 🛠️
* **NF4.1 (監視):** ラズパイの稼働状態やCloudflare Workersのログなどを容易に確認できる仕組みを持つこと。
* **NF4.2 (拡張性):** 将来的にセンサー数や取得項目が増加した場合にも、比較的容易に対応できるようなアーキテクチャであること。

---

## 3. 技術スタックの提案 (Proposed Tech Stack)

| 要素 | 役割 | 提案技術 | 採用理由 (Cloudflare中心) |
| :--- | :--- | :--- | :--- |
| ハードウェア | センサーデータの取得 | Raspberry Pi、土壌センサー | 要望による必須のコンポーネント。 |
| エッジ処理 | データの前処理、送信 | Python (またはNode.js) on Raspberry Pi | センサーのドライバを扱いやすい。|
| バックエンド/API | データ受信、Slack連携 | Cloudflare Workers | 低コストで高速なサーバーレス環境。Slack連携に最適。|
| データベース | データ永続化 | Cloudflare D1 (または R2) | Cloudflareエコシステム内で完結し、低コストかつ低遅延。|
| Slack連携 | コマンド、通知 | Cloudflare Workers (Slack API) | WorkersがAPIのエンドポイントとなり、Slackからのリクエストを処理。|
| 可視化 | BIツール連携 | Cloudflare Workers (カスタムAPI) | BIツールからのデータ要求を受け付け、D1から取得したデータを返却する専用APIを作成。|
